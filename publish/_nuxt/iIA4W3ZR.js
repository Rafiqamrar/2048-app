import{f as k,o as b,c as G,a as p,t as O,g as S,b as y,h as m,n as B,i as C,_ as A,F as D,r as W,j as E,k as M,w as j,d as T,l as L,m as R,p as Y,q as I}from"./DmPSRTY8.js";const P={class:"flex flex-col items-center bg-gray-400 dark:bg-gray-600 rounded-lg px-4 py-2 min-w-20"},U={class:"text-xs text-gray-200 uppercase font-medium"},V={class:"text-xl sm:text-2xl font-bold text-white"},H=k({__name:"ScoreDisplay",props:{label:{},value:{}},setup(r){return(c,s)=>(b(),G("div",P,[p("span",U,O(r.label),1),p("span",V,O(r.value),1)]))}}),J=Object.assign(H,{__name:"GameScoreDisplay"}),z=()=>{const r=S("game-grid",()=>u()),c=S("game-score",()=>0),s=S("game-best-score",()=>0),i=S("game-over",()=>!1),_=S("game-won",()=>!1);function u(){return[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}function g(){const n=[],e=r.value;for(let t=0;t<4;t++)for(let a=0;a<4;a++)e[t][a]===0&&n.push([t,a]);if(n.length>0){const t=Math.floor(Math.random()*n.length),a=n[t];if(a){const[l,o]=a,h=[[...e[0]],[...e[1]],[...e[2]],[...e[3]]];h[l][o]=Math.random()<.9?2:4,r.value=h}}}function d(){r.value=u(),c.value=0,i.value=!1,_.value=!1,g(),g()}function x(){{const n=localStorage.getItem("2048-best-score");n&&(s.value=parseInt(n,10))}}function f(){localStorage.setItem("2048-best-score",s.value.toString())}return{grid:r,score:c,bestScore:s,isGameOver:i,isWon:_,resetGame:d,spawnTile:g,createEmptyGrid:u,loadBestScore:x,saveBestScore:f}},X={class:"flex flex-col sm:flex-row items-center justify-between gap-4 mb-4"},F={class:"flex gap-2"},q=k({__name:"Header",setup(r){const{score:c,bestScore:s}=z();return(i,_)=>{const u=J;return b(),G("header",X,[_[0]||(_[0]=p("h1",{class:"text-5xl sm:text-6xl font-bold text-gray-800 dark:text-white"},"2048",-1)),p("div",F,[y(u,{label:"Score",value:m(c)},null,8,["value"]),y(u,{label:"Best",value:m(s)},null,8,["value"])])])}}}),K=Object.assign(q,{__name:"GameHeader"}),Q=k({__name:"Tile",props:{value:{}},setup(r){const c=r,s={0:{bg:"bg-gray-300 dark:bg-gray-700",text:"text-transparent",size:"text-4xl"},2:{bg:"bg-amber-100",text:"text-gray-700",size:"text-4xl"},4:{bg:"bg-amber-200",text:"text-gray-700",size:"text-4xl"},8:{bg:"bg-orange-300",text:"text-white",size:"text-4xl"},16:{bg:"bg-orange-400",text:"text-white",size:"text-4xl"},32:{bg:"bg-orange-500",text:"text-white",size:"text-4xl"},64:{bg:"bg-orange-600",text:"text-white",size:"text-4xl"},128:{bg:"bg-yellow-400",text:"text-white",size:"text-3xl"},256:{bg:"bg-yellow-500",text:"text-white",size:"text-3xl"},512:{bg:"bg-yellow-600",text:"text-white",size:"text-3xl"},1024:{bg:"bg-yellow-700",text:"text-white",size:"text-2xl"},2048:{bg:"bg-yellow-500",text:"text-white",size:"text-2xl"}},i=C(()=>s[c.value]||{bg:"bg-gray-800",text:"text-white",size:"text-xl"});return(_,u)=>(b(),G("div",{class:B(["tile w-16 h-16 sm:w-20 sm:h-20 flex items-center justify-center rounded-lg font-bold transition-all duration-100",[m(i).bg,m(i).text,m(i).size]])},O(r.value||""),3))}}),Z=Object.assign(A(Q,[["__scopeId","data-v-e716f324"]]),{__name:"GameTile"}),ee=()=>{const{grid:r,score:c,bestScore:s,isGameOver:i,isWon:_,spawnTile:u,saveBestScore:g}=z();function d(n){const e=n.filter(a=>a!==0);let t=0;for(let a=0;a<e.length-1;a++){const l=e[a],o=e[a+1];l!==void 0&&o!==void 0&&l===o&&(e[a]=l*2,t+=e[a],e[a]===2048&&(_.value=!0),e.splice(a+1,1))}for(;e.length<4;)e.push(0);return{newRow:e,points:t}}function x(n){if(i.value)return;const e=JSON.stringify(r.value);let t=0;const a=r.value,l=[[...a[0]],[...a[1]],[...a[2]],[...a[3]]];if(n==="left")for(let o=0;o<4;o++){const{newRow:h,points:w}=d(l[o]);l[o]=h,t+=w}else if(n==="right")for(let o=0;o<4;o++){const{newRow:h,points:w}=d([...l[o]].reverse());l[o]=h.reverse(),t+=w}else if(n==="up")for(let o=0;o<4;o++){const h=[l[0][o],l[1][o],l[2][o],l[3][o]],{newRow:w,points:$}=d(h);for(let v=0;v<4;v++)l[v][o]=w[v];t+=$}else if(n==="down")for(let o=0;o<4;o++){const h=[l[3][o],l[2][o],l[1][o],l[0][o]],{newRow:w,points:$}=d(h);for(let v=0;v<4;v++)l[3-v][o]=w[v];t+=$}JSON.stringify(l)!==e&&(r.value=l,c.value+=t,c.value>s.value&&(s.value=c.value,g()),u(),f())}function f(){const n=r.value;for(let e=0;e<4;e++)for(let t=0;t<4;t++)if(n[e][t]===0)return;for(let e=0;e<4;e++)for(let t=0;t<3;t++)if(n[e][t]===n[e][t+1])return;for(let e=0;e<3;e++)for(let t=0;t<4;t++)if(n[e][t]===n[e+1][t])return;i.value=!0}return{move:x,checkGameOver:f}},N=()=>{const{move:r}=ee();let c=0,s=0;function i(x){const n={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",w:"up",W:"up",s:"down",S:"down",a:"left",A:"left",d:"right",D:"right"}[x.key];n&&(x.preventDefault(),r(n))}function _(x){const f=x.touches[0];f&&(c=f.clientX,s=f.clientY)}function u(x){const f=x.changedTouches[0];if(!f)return;const n=f.clientX-c,e=f.clientY-s,t=50;Math.abs(n)>Math.abs(e)&&Math.abs(n)>t?r(n>0?"right":"left"):Math.abs(e)>t&&r(e>0?"down":"up")}function g(){window.addEventListener("keydown",i)}function d(){window.removeEventListener("keydown",i)}return{handleTouchStart:_,handleTouchEnd:u,initControls:g,destroyControls:d}},te={class:"grid grid-cols-4 gap-2 sm:gap-3"},oe=k({__name:"Board",setup(r){const{grid:c}=z(),{handleTouchStart:s,handleTouchEnd:i}=N();return(_,u)=>{const g=Z;return b(),G("div",{class:"game-board p-3 sm:p-4 bg-gray-400 dark:bg-gray-600 rounded-xl",onTouchstartPassive:u[0]||(u[0]=(...d)=>m(s)&&m(s)(...d)),onTouchendPassive:u[1]||(u[1]=(...d)=>m(i)&&m(i)(...d))},[p("div",te,[(b(!0),G(D,null,W(m(c).flat(),(d,x)=>(b(),E(g,{key:x,value:d},null,8,["value"]))),128))])],32)}}}),ne=Object.assign(oe,{__name:"GameBoard"}),se={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},re={class:"bg-white dark:bg-gray-800 rounded-xl p-8 text-center shadow-2xl max-w-sm mx-4"},ae={class:"text-gray-600 dark:text-gray-300 mb-6"},le=k({__name:"OverModal",setup(r){const{isGameOver:c,isWon:s,resetGame:i}=z(),_=C(()=>s.value?"ðŸŽ‰ You Win!":"ðŸ˜¢ Game Over"),u=C(()=>s.value?"Congratulations! You reached 2048!":"No more moves available. Try again!");return(g,d)=>{const x=M;return m(c)||m(s)?(b(),G("div",se,[p("div",re,[p("h2",{class:B(["text-3xl font-bold mb-4",m(s)?"text-green-500":"text-red-500"])},O(m(_)),3),p("p",ae,O(m(u)),1),y(x,{size:"lg",color:"primary",onClick:m(i)},{default:j(()=>[...d[0]||(d[0]=[T(" Play Again ",-1)])]),_:1},8,["onClick"])])])):L("",!0)}}}),ce=Object.assign(le,{__name:"GameOverModal"}),ie={class:"min-h-screen bg-gray-100 dark:bg-gray-900 py-8 px-4"},ue={class:"max-w-md mx-auto"},de={class:"flex justify-between items-center mb-4"},me=k({__name:"index",setup(r){const{resetGame:c,loadBestScore:s}=z(),{initControls:i,destroyControls:_}=N();return R(()=>{s(),c(),i()}),Y(()=>{_()}),(u,g)=>{const d=K,x=M,f=ne,n=ce;return b(),G("div",ie,[p("div",ue,[y(d),p("div",de,[g[1]||(g[1]=p("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[T(" Join the tiles, get to "),p("strong",null,"2048!")],-1)),y(x,{color:"primary",variant:"solid",onClick:m(c)},{default:j(()=>[...g[0]||(g[0]=[T(" New Game ",-1)])]),_:1},8,["onClick"])]),y(f),g[2]||(g[2]=I('<div class="mt-4 text-center text-sm text-gray-500 dark:text-gray-400"><p><strong>HOW TO PLAY:</strong> Use your <strong>arrow keys</strong> or <strong>WASD</strong> to move the tiles.</p><p class="mt-1">On mobile, <strong>swipe</strong> to move.</p><p class="mt-1">Tiles with the same number <strong>merge into one</strong> when they touch.</p></div>',1)),y(n)])])}}});export{me as default};
